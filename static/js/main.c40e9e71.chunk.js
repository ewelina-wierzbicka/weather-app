(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{121:function(e,t,a){e.exports=a(154)},126:function(e,t,a){},127:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(62),o=a.n(c),i=(a(126),a(127),a(40)),l=a(161),s=a(85),u=a(94),d=a.n(u),m=a(109),p=a(78),h=Object(p.b)({name:"weather",initialState:{city:"",loading:!1,weatherList:[],error:{}},reducers:{citySubmitted:function(e,t){var a=t.payload;e.city=a},requestWeatherSuccess:function(e,t){var a=t.payload;e.weatherList=a,e.loading=!1},requestWeather:function(e){e.loading=!0},requestWeatherFail:function(e,t){var a=t.payload;e.weatherList=[],e.loading=!1,e.error=a}}}),f=h.actions,b=f.citySubmitted,y=f.requestWeatherSuccess,w=f.requestWeather,g=f.requestWeatherFail;var E=h.reducer,v=a(160),k=a(159),x=a(158),O=a(119),S=Object(O.a)({cityInput:{width:150,margin:20,backgroundColor:"transparent",border:0,borderBottom:"4px solid #fff4de",outline:0,"&:-webkit-autofill":{transition:"background-color 5000s"}},cityError:{color:"red"},submitButton:{width:120,height:120,borderRadius:"100%",margin:20,backgroundColor:"#fff4de",border:"4px solid white",whiteSpace:"normal",outline:0},weatherList:{"& >*":{display:"inline-block",margin:20,padding:10,border:"4px solid #fff4de",backgroundColor:"rgba(255,255,255,0.8)"}},temperature:{fontSize:30,fontWeight:"100",padding:10},loading:{fontSize:34}}),j=function(e){var t=e.weather,a=S(),n=Object(k.a)(Object(x.a)(t.dt),"dd.MM.yyyy"),c=Math.round(t.temp.day),o="http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png");return r.a.createElement("div",null,t&&r.a.createElement("div",null,r.a.createElement("p",null,n),r.a.createElement("img",{src:o,alt:""}),r.a.createElement("p",null,"Temperatura:",r.a.createElement("span",{className:a.temperature},c,"\xb0C")),r.a.createElement("p",null,"Zachmurzenie: "," ",r.a.createElement(v.a,{type:"circle",status:"normal",percent:t.clouds}))))},W=function(e){return e.city},q=function(e){return e.loading},N=function(e){return e.weatherList},L=a(100),B=L.a().shape({city:L.b().required("Wpisz miasto")}),M=a(7),z=function(){var e=S(),t=Object(i.b)(),a=Object(i.c)(W),n=Object(i.c)(q),c=Object(i.c)(N),o=Object(M.d)(),u=function(){o.push("/success")},p=function(){o.push("/error")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.c,{initialValues:{city:""},onSubmit:function(e){t(b(e.city)),t(function(e){var t=e.value,a=e.onSuccess,n=e.onError;return function(){var e=Object(m.a)(d.a.mark((function e(r){var c,o,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(w()),e.prev=1,e.next=4,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&appid=").concat("05ec36f5239e419fffc1d5fbe32d7984","&units=metric"));case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("".concat(c.status," - ").concat(c.statusText));case 7:return e.next=9,c.json();case 9:return o=e.sent,e.next=12,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(o.coord.lat,"&lon=").concat(o.coord.lon,"&exclude=current,minutely,hourly&appid=").concat("05ec36f5239e419fffc1d5fbe32d7984","&units=metric"));case 12:if((i=e.sent).ok){e.next=15;break}throw new Error("".concat(i.status," - ").concat(i.statusText));case 15:return e.next=17,i.json();case 17:l=e.sent,r(y(l.daily)),a&&a(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),r(g(e.t0.message)),n&&n();case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}()}({value:e.city,onSuccess:u,onError:p}))},validationSchema:B},(function(t){return r.a.createElement(s.b,null,r.a.createElement("label",{htmlFor:"city"},"Miasto:",r.a.createElement(s.a,{id:"city",className:e.cityInput,type:"text",name:"city"}),r.a.createElement("p",{className:e.cityError},t.errors.city)),r.a.createElement("div",null,r.a.createElement("button",{className:e.submitButton,type:"submit"},"POKA\u017b PROGNOZ\u0118 POGODY")))})),r.a.createElement("p",null,"Wybrane miasto: ",a),n&&r.a.createElement(l.a,{className:e.loading,spin:!0}),r.a.createElement("div",{className:e.weatherList},c.map((function(e){return r.a.createElement(j,{key:e.dt.toString(),weather:e})}))))},C=E,F=Object(p.a)({reducer:C}),I=a(92),P=function(){return r.a.createElement(i.a,{store:F},r.a.createElement(I.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(z,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.c40e9e71.chunk.js.map